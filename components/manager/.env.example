# IMPORTANT: Copy this file to .env and replace all CHANGE_ME values
# with strong, unique passwords before running the application.
# Never commit real credentials to version control.

ENV_NAME=development

# APP
VERSION=v1.0.0
APP_CONTEXT=/manager/v1
SERVER_PORT=4005
SERVER_ADDRESS=":${SERVER_PORT}"

# CORS
# Comma-separated list of allowed origins. Use explicit HTTPS origins in production.
# Wildcard (*) is allowed only in development environments.
CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Origin,Content-Type,Accept,Authorization,X-Request-ID

# RATE LIMITING
# Feature toggle: set to false to disable rate limiting entirely (must be true in production).
RATE_LIMIT_ENABLED=true
# Three-tier rate limiting per IP address. Values are max requests per window.
# Global: general API requests (GET templates, GET reports, etc.)
# Export: resource-intensive downloads (GET /v1/reports/:id/download)
# Dispatch: write operations (POST, PUT, PATCH, DELETE)
RATE_LIMIT_GLOBAL=100
RATE_LIMIT_EXPORT=10
RATE_LIMIT_DISPATCH=50
# Sliding window duration in seconds for all rate limit tiers.
RATE_LIMIT_WINDOW_SECONDS=60

# TRUSTED PROXIES
# Comma-separated list of trusted proxy IP addresses/CIDRs.
# When set, Fiber uses X-Forwarded-For from these proxies for accurate client IP.
# Leave empty to trust the direct connection IP (default for non-proxied setups).
TRUSTED_PROXIES=

# STORAGE CONFIGS (Object Storage - S3-compatible)
# Uses SeaweedFS S3 API by default (standalone mode)
# Compatible with: SeaweedFS S3, MinIO, AWS S3, and other S3-compatible services

# Object Storage endpoint (default for local development with SeaweedFS)
OBJECT_STORAGE_ENDPOINT=http://reporter-seaweedfs:8333
OBJECT_STORAGE_REGION=us-east-1
OBJECT_STORAGE_ACCESS_KEY_ID=any
OBJECT_STORAGE_SECRET_KEY=any
OBJECT_STORAGE_USE_PATH_STYLE=true
OBJECT_STORAGE_DISABLE_SSL=true

# Storage bucket name (uses templates/ and reports/ prefixes internally)
OBJECT_STORAGE_BUCKET=reporter-storage

# Note: For production with AWS S3, remove OBJECT_STORAGE_ENDPOINT and use real credentials
# For MinIO, change OBJECT_STORAGE_ENDPOINT to your MinIO server URL

# MONGO DB
#MONGO_URI=mongo+srv
MONGO_URI=mongodb
MONGO_HOST=reporter-mongodb
MONGO_NAME=reporter-db
MONGO_USER=reporter-user
MONGO_PASSWORD=CHANGE_ME
MONGO_PORT=5708
MONGO_MAX_POOL_SIZE=1000
MONGO_PARAMETERS=

# SWAGGER
SWAGGER_TITLE='Reporter'
SWAGGER_DESCRIPTION='Documentation for reporter'
SWAGGER_VERSION="${VERSION}"
SWAGGER_HOST="${SERVER_ADDRESS}"
SWAGGER_BASE_PATH=/
SWAGGER_SCHEMES=http
SWAGGER_LEFT_DELIMITER={{
SWAGGER_RIGHT_DELIMITER=}}

# RABBITMQ
RABBITMQ_URI=amqp
RABBITMQ_HOST=reporter-rabbitmq
RABBITMQ_PORT_AMQP=3005
RABBITMQ_PORT_HOST=3006
RABBITMQ_DEFAULT_USER=reporter-user
RABBITMQ_DEFAULT_PASS=CHANGE_ME
RABBITMQ_EXCHANGE=reporter.generate-report.exchange
RABBITMQ_GENERATE_REPORT_QUEUE=reporter.generate-report.queue
RABBITMQ_HEALTH_CHECK_URL=http://${RABBITMQ_HOST}:${RABBITMQ_PORT_HOST}
RABBITMQ_GENERATE_REPORT_KEY=reporter.generate-report.key

# LOG LEVEL
LOG_LEVEL=debug

# OPEN TELEMETRY
OTEL_RESOURCE_SERVICE_NAME=reporter-manager
OTEL_LIBRARY_NAME=github.com/LerianStudio/reporter
OTEL_RESOURCE_SERVICE_VERSION="${VERSION}"
OTEL_RESOURCE_DEPLOYMENT_ENVIRONMENT="${ENV_NAME}"
OTEL_EXPORTER_OTLP_ENDPOINT_PORT=4317
OTEL_EXPORTER_OTLP_ENDPOINT="otlp://otel-lgtm:${OTEL_EXPORTER_OTLP_ENDPOINT_PORT}"
# Enable OpenTelemetry (set to false for local dev without collector)
ENABLE_TELEMETRY=false

# === EXTERNAL DATABASES EXAMPLE ===

# MIDAZ ONBOARDING (single schema - uses public by default)
DATASOURCE_ONBOARDING_CONFIG_NAME=midaz_onboarding
DATASOURCE_ONBOARDING_HOST=midaz-postgres-replica
DATASOURCE_ONBOARDING_PORT=5702
DATASOURCE_ONBOARDING_USER=midaz
DATASOURCE_ONBOARDING_PASSWORD=CHANGE_ME
DATASOURCE_ONBOARDING_DATABASE=onboarding
DATASOURCE_ONBOARDING_TYPE=postgresql
DATASOURCE_ONBOARDING_SSLMODE=disable
DATASOURCE_ONBOARDING_SSLROOTCERT=

# EXTERNAL DATABASE WITH MULTIPLE SCHEMAS
# Use DATASOURCE_<NAME>_SCHEMAS to specify which schemas to query (comma-separated)
# If not set, defaults to "public" schema only
# In templates, use explicit schema syntax: external_db:sales.orders
#DATASOURCE_EXTERNAL_CONFIG_NAME=external_db
#DATASOURCE_EXTERNAL_HOST=external-postgres
#DATASOURCE_EXTERNAL_PORT=5432
#DATASOURCE_EXTERNAL_USER=db_user
#DATASOURCE_EXTERNAL_PASSWORD=CHANGE_ME
#DATASOURCE_EXTERNAL_DATABASE=external_database
#DATASOURCE_EXTERNAL_TYPE=postgresql
#DATASOURCE_EXTERNAL_SSLMODE=disable
#DATASOURCE_EXTERNAL_SSLROOTCERT=
#DATASOURCE_EXTERNAL_DB_SCHEMAS=sales,inventory,reporting

# AUTHORIZATION
PLUGIN_AUTH_ADDRESS=http://plugin-auth:4000
PLUGIN_AUTH_ENABLED=false

# REDIS
# USE ONLY ON SENTINEL
REDIS_MASTER_NAME=

REDIS_TLS=false
REDIS_CA_CERT=

REDIS_USE_GCP_IAM=false
REDIS_SERVICE_ACCOUNT=
GOOGLE_APPLICATION_CREDENTIALS=

REDIS_HOST=reporter-valkey:5705
REDIS_PASSWORD=CHANGE_ME
REDIS_DB=0
REDIS_PROTOCOL=3